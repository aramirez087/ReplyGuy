## Session 01 — Completion Summary

### Files Created
- `docs/roadmap/x-api-surface-expansion/charter.md` — Full technical charter (490 lines)
- `docs/roadmap/x-api-surface-expansion/session-01-handoff.md` — Handoff document (545 lines)

### Tests Run
- No code changes were made, so no CI run needed. This was a documentation/decision session.

### Key Decisions Made

| ID | Decision | Rationale |
|----|----------|-----------|
| D-001 | Two-layer architecture (curated + universal) | Separates business-logic-rich tools from raw API passthrough |
| D-002 | DMs excluded | Highest account-suspension risk, different trust model |
| D-003 | Ads API excluded | Different auth model, financial risk |
| D-004 | Compliance excluded | Enterprise-only, unrelated use case |
| D-005 | Full-archive search gated by tier | Leverages existing tier detection |
| D-006 | New categories: `List` and `Moderation` | 15 + 8 tools justify first-class grouping |
| D-007 | Profile assignment: reads spread, mutations workflow-only | Consistent with existing principle |
| D-008 | Host allowlist at client level, not per-tool | Single enforcement point, impossible to bypass |
| D-009 | Declarative registry over proc macros | Simpler, debuggable, diffable |
| D-010 | Idempotency via SQLite table | Existing infra, no new dependencies |

### Expansion Summary
- **Current:** 64 tools (30 direct X API / 34 workflow)
- **Adding:** 36 new tools (21 reads, 15 mutations)
- **Post-expansion:** 100 tools (full), 39 (api-readonly), 14 (readonly)
- **Coverage:** From ~45% to 100% of stable X API v2 endpoints (excluding DMs, Ads, Compliance)

### Warnings for Next Session
- Session 02 should verify that the `ToolCategory` enum change compiles cleanly before adding registry data. The `category_counts` test in `manifest.rs` has a hardcoded threshold (`>= 10`) that will need updating.
- The manifest snapshot test (`manifest_snapshot`) will fail after adding new categories — snapshot regeneration is deferred to Session 10 but the test file path points to `roadmap/artifacts/session-05-tool-manifest.json`. Session 02 should note this path dependency.
